(this["webpackJsonpcoal-miner-fixed"]=this["webpackJsonpcoal-miner-fixed"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),i=n.n(a),r=n(5),o=n.n(r),s=n(2),l=n(3),u="UpgradeWorker",d="BuyWorker";function O(e,t){switch(t.type){case u:return Object(l.a)(Object(l.a)({},e),{},{productionRate:e.productionRate+1,productionRateUpgradeCost:2*e.productionRateUpgradeCost,level:e.level+1});case d:return Object(l.a)(Object(l.a)({},e),{},{owned:e.owned+t.payload,cost:e.cost+t.payload});default:return e}}function j(e){var t=e.worker,n=e.money,i=e.setMoney,r=e.multiplier,o=function(e,t,n,c){var i=Object(a.useReducer)(O,e),r=Object(s.a)(i,2),o=r[0],l=r[1],j=Object(a.useCallback)((function(){var e=o.cost*c;n<e||(t((function(t){return t-e})),l({type:d,payload:c}))}),[o,c,n]),p=Object(a.useCallback)((function(){n<o.productionRateUpgradeCost||(t((function(e){return e-o.productionRateUpgradeCost})),l({type:u}))}),[o,n]),b=Object(a.useState)(0),m=Object(s.a)(b,2),h=m[0],f=m[1],R=Object(a.useState)(0),C=Object(s.a)(R,2),_=C[0],E=C[1],g=Object(a.useState)(Date.now()),S=Object(s.a)(g,2),y=S[0],x=S[1],A=Object(a.useState)(0),T=Object(s.a)(A,2),v=T[0],U=T[1];return Object(a.useEffect)((function(){setInterval((function(){f((function(e){return e+1}))}),o.speed),setInterval((function(){E((function(e){return e+1}))}),80)}),[]),Object(a.useEffect)((function(){t((function(e){return e+o.owned*o.productionRate})),x(Date.now())}),[h]),Object(a.useEffect)((function(){0!==o.owned&&U(Math.floor((Date.now()-y)/o.speed*100))}),[_]),[o,v,j,p]}(t,i,n,r),l=Object(s.a)(o,4),j=l[0],p=l[1],b=l[2],m=l[3],h=Object(a.useState)(!1),f=Object(s.a)(h,2),R=f[0],C=f[1],_=Object(a.useState)(!0),E=Object(s.a)(_,2),g=E[0],S=E[1];Object(a.useEffect)((function(){t.cost<=n&&C(!0)}),[n]);return R?Object(c.jsxs)("div",{className:"worker",onClick:function(){return S(!g)},"data-cy":"visibility-btn",children:[Object(c.jsx)("h3",{className:"worker-name",children:j.name}),g?Object(c.jsxs)("div",{"data-cy":"visibility-pnl",className:"visible",children:[Object(c.jsx)("progress",{"data-cy":"progress",max:100,value:p}),Object(c.jsxs)("button",{"data-cy":"buy",onClick:function(e){e.stopPropagation(),b()},children:["Buy ",Object(c.jsx)("span",{children:r})," for ",Object(c.jsx)("span",{children:j.cost*r}),"$?"]}),Object(c.jsxs)("button",{onClick:function(e){e.stopPropagation(),m()},children:["Upgrade for ",Object(c.jsx)("span",{children:j.productionRateUpgradeCost}),"$?"]}),Object(c.jsx)("img",{className:"worker-image",src:j.img}),Object(c.jsxs)("h4",{children:["Owned: ",Object(c.jsx)("span",{"data-cy":"owned",children:j.owned})]}),Object(c.jsxs)("h4",{children:["Production Rate: ",Object(c.jsx)("span",{children:j.productionRate}),"$"]}),Object(c.jsxs)("h4",{children:["Level: ",Object(c.jsx)("span",{children:j.level})]})]}):null]}):null}var p=n(6),b=n(7),m=n.p+"static/media/drill.1a13da94.png",h=n.p+"static/media/worker.5a8cd7ac.png",f=n.p+"static/media/monky.16a653ef.png",R=function(){function e(t){var n=t.defaultCost,c=t.defaultProductionRate,a=t.defaultProductionRateUpgradeCost,i=t.name,r=t.img,o=t.miningSpeed;Object(p.a)(this,e),this.OWNED_LOCAL_STORAGE_KEY="Coalminer.".concat(i,"Owned"),this.COST_LOCAL_STORAGE_KEY="Coalminer.".concat(i,"Cost"),this.UPGRADE_CAP_LOCAL_STORAGE_KEY="Coalminer.".concat(i,"CapLimit"),this.CURRENT_PRODUCTION_RATE_LOCAL_STORAGE_KEY="Coalminer.".concat(i,"CurrentProductionRate"),this.CURRENT_PRODUCTION_RATE_UPGRADE_COST_LOCAL_STORAGE_KEY="Coalminer.".concat(i,"CurrentProductionRateUpgradeCost"),this.name=i,this.owned=JSON.parse(localStorage.getItem(this.OWNED_LOCAL_STORAGE_KEY))||0,this.cost=JSON.parse(localStorage.getItem(this.COST_LOCAL_STORAGE_KEY))||n,this.productionRate=JSON.parse(localStorage.getItem(this.CURRENT_PPRODUCTION_RATE_LOCAL_STORAGE_KEY))||c,this.productionRateUpgradeCost=JSON.parse(localStorage.getItem(this.CURRENT_PRODUCTION_RATE_UPGRADE_COST_LOCAL_STORAGE_KEY))||a,this.level=0,this.img=r,this.speed=o,this.saveFiles=[{key:this.OWNED_LOCAL_STORAGE_KEY,value:this.owned},{key:this.COST_LOCAL_STORAGE_KEY,value:this.cost},{key:this.CURRENT_PRODUCTION_RATE_LOCAL_STORAGE_KEY,value:this.productionRate},{key:this.CURRENT_PRODUCTION_RATE_UPGRADE_COST_LOCAL_STORAGE_KEY,value:this.productionRateUpgradeCost}]}return Object(b.a)(e,[{key:"save",value:function(){this.saveFiles.forEach((function(e){localStorage.setItem(e.key,JSON.stringify(e.value))}))}}]),e}(),C=[new R({defaultCost:10,defaultProductionRate:1,defaultProductionRateUpgradeCost:30,name:"Miners",img:h,miningSpeed:3e3}),new R({defaultCost:50,defaultProductionRate:10,defaultProductionRateUpgradeCost:100,name:"Drills",img:m,miningSpeed:2e3}),new R({defaultCost:100,defaultProductionRate:20,defaultProductionRateUpgradeCost:300,name:"Monkey Miners",img:f,miningSpeed:1e3})];function _(e){var t=e.money,n=e.setMoney,a=e.multiplier;return Object(c.jsx)("ul",{class:"worker-list",children:C.map((function(e,i){return Object(c.jsx)(j,{worker:e,money:t,setMoney:n,multiplier:a},i)}))})}n(13);function E(e){var t=e.amount,n=e.setMultiplier;return Object(c.jsxs)("label",{for:"".concat(t,"-multiplier"),children:[t,"x",Object(c.jsx)("input",{"data-cy":"multiplier",type:"radio",value:t,id:"".concat(t,"-multiplier"),name:"multiplier",onClick:function(){n(t)}})]})}function g(e){var t=e.setMultiplier;return Object(c.jsx)("div",{className:"multiplier-container",children:Object(c.jsxs)("fieldset",{children:[Object(c.jsx)("legend",{children:"Multipliers for buying in mass:"}),Object(c.jsx)(E,{amount:1,setMultiplier:t},"1"),Object(c.jsx)(E,{amount:10,setMultiplier:t},"10"),Object(c.jsx)(E,{amount:100,setMultiplier:t},"100")]})})}var S=function(){var e=Object(a.useState)(10),t=Object(s.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)(1),o=Object(s.a)(r,2),l=o[0],u=o[1];return Object(a.useEffect)((function(){localStorage.setItem("GoldMiner.money",JSON.stringify(n))}),[n]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("header",{children:[Object(c.jsxs)("div",{className:"text-container",children:[Object(c.jsx)("h1",{children:"Gold Miners"}),Object(c.jsxs)("h2",{children:["Current Money: ",Object(c.jsx)("span",{"data-cy":"money",children:n})]})]}),Object(c.jsx)(g,{setMultiplier:u})]}),Object(c.jsx)("main",{children:Object(c.jsx)(_,{money:n,multiplier:l,setMoney:i})})]})};o.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(S,{})}),document.querySelector("body"))}},[[14,1,2]]]);
//# sourceMappingURL=main.62134ffb.chunk.js.map