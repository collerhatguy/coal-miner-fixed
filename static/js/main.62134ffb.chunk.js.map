{"version":3,"sources":["hooks/useWorker.js","components/Worker.js","images/drill.png","images/worker.png","images/monky.png","misc.js","components/WorkerList.js","components/Multiplier.js","components/MultiplierList.js","App.js","index.js"],"names":["ACTIONS","reducer","state","action","type","productionRate","productionRateUpgradeCost","level","owned","payload","cost","Worker","worker","money","setMoney","multiplier","useReducer","dispatch","BuyWorker","useCallback","totalCost","prevMoney","UpgradeWorker","useState","miningTrigger","setMiningTrigger","progressTrigger","setProgressTrigger","Date","now","lastMinedTime","setLastMinedTime","progress","setProgress","useEffect","setInterval","prevMining","speed","prevProgress","Math","floor","useWorker","workerState","affordable","setAffordable","visible","setVisible","className","onClick","data-cy","name","max","value","e","stopPropagation","src","img","defaultCost","defaultProductionRate","defaultProductionRateUpgradeCost","miningSpeed","this","OWNED_LOCAL_STORAGE_KEY","COST_LOCAL_STORAGE_KEY","UPGRADE_CAP_LOCAL_STORAGE_KEY","CURRENT_PRODUCTION_RATE_LOCAL_STORAGE_KEY","CURRENT_PRODUCTION_RATE_UPGRADE_COST_LOCAL_STORAGE_KEY","JSON","parse","localStorage","getItem","CURRENT_PPRODUCTION_RATE_LOCAL_STORAGE_KEY","saveFiles","key","forEach","save","setItem","stringify","Workers","workerImg","drillImg","monkeyImg","WorkerList","class","map","index","Multiplier","amount","setMultiplier","for","id","MultiplierList","App","ReactDOM","render","StrictMode","document","querySelector"],"mappings":"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","file":"static/js/main.62134ffb.chunk.js","sourcesContent":["import { useReducer, useEffect, useCallback, useState } from \"react\";\n\nconst ACTIONS = {\n    Upgrade: \"UpgradeWorker\",\n    Buy: \"BuyWorker\",\n    Mining: \"MiningWorker\",\n}\nfunction reducer(state, action) {\n    switch(action.type) {\n        case ACTIONS.Upgrade:\n            return {\n                ...state,\n                productionRate: state.productionRate + 1, \n                productionRateUpgradeCost: state.productionRateUpgradeCost * 2,\n                level: state.level + 1, \n            }\n        case ACTIONS.Buy:\n            return {\n                ...state,\n                owned: state.owned + action.payload,\n                cost: state.cost + action.payload, \n            }\n        default: return state;\n    }\n}\nexport default function useWorker(worker, setMoney, money, multiplier) {\n    const [state, dispatch] = useReducer(reducer, worker);\n    \n    const BuyWorker = useCallback(() => {\n        const totalCost = state.cost * multiplier;\n        if (money < totalCost) return;\n        setMoney(prevMoney => prevMoney - totalCost);\n        dispatch({type: ACTIONS.Buy, payload: multiplier})\n    }, [state, multiplier, money])\n    \n    const UpgradeWorker = useCallback(() => {\n        if (money < state.productionRateUpgradeCost) return;\n        setMoney(prevMoney => prevMoney - state.productionRateUpgradeCost);\n        dispatch({type: ACTIONS.Upgrade})\n    }, [state, money])\n    \n    const [miningTrigger, setMiningTrigger] = useState(0);\n    const [progressTrigger, setProgressTrigger] = useState(0);\n    const [lastMinedTime, setLastMinedTime] = useState(Date.now());\n    const [progress, setProgress] = useState(0);\n    useEffect(() => {\n        // set up the triggers for useEffect mining\n        // has to be done this whay b/c state doesnt update withen a set timmeout function\n        setInterval(() => {\n            setMiningTrigger(prevMining => prevMining + 1)\n        }, state.speed)\n        \n        const progressSpeed = 80;\n        setInterval(() => {\n            setProgressTrigger(prevProgress => prevProgress + 1)\n        }, progressSpeed)\n    }, []);\n\n    useEffect(() => {\n        setMoney(prevMoney => prevMoney + state.owned * state.productionRate);\n        // reset the time that we last mined\n        setLastMinedTime(Date.now());\n    }, [miningTrigger]);\n\n    useEffect(() => {\n        if (state.owned === 0) return;\n        // calculate how much time past in percentage since we last mined\n        setProgress(Math.floor(((Date.now() - lastMinedTime) / state.speed) * 100));\n    }, [progressTrigger])\n\n    \n    return [state, progress, BuyWorker, UpgradeWorker];\n}","import React, {useState, useEffect} from 'react';\nimport useWorker from \"../hooks/useWorker\";\n\n\nexport default function Worker({worker, money, setMoney, multiplier}) {\n    const [workerState, progress, BuyWorker, UpgradeWorker] = useWorker(worker, setMoney, money, multiplier);\n    const [affordable, setAffordable] = useState(false)\n    const [visible, setVisible] = useState(true)\n    useEffect(() => {\n        if (worker.cost <= money) setAffordable(true); \n    }, [money])\n    const buy = e => {\n        e.stopPropagation()\n        BuyWorker()\n    }\n    const upgrade = e => {\n        e.stopPropagation()\n        UpgradeWorker()\n    }\n    if (!affordable) return null;\n    return (\n        <div \n            className=\"worker\"\n            onClick={() => setVisible(!visible)}\n            data-cy=\"visibility-btn\">\n            <h3 className=\"worker-name\">{workerState.name}</h3>\n            {visible ? <div data-cy=\"visibility-pnl\" className=\"visible\">\n                <progress data-cy=\"progress\" max={100} value={progress} />\n                <button \n                    data-cy=\"buy\" \n                    onClick={buy}\n                >Buy <span>{multiplier}</span> for <span>{workerState.cost * multiplier}</span>$?</button>\n                <button \n                    onClick={upgrade}\n                >Upgrade for <span>{workerState.productionRateUpgradeCost}</span>$?</button>\n                <img className=\"worker-image\" \n                    src={workerState.img} />\n                <h4>Owned: <span data-cy=\"owned\">{workerState.owned}</span></h4>\n                <h4>Production Rate: <span>{workerState.productionRate}</span>$</h4>\n                <h4>Level: <span>{workerState.level}</span></h4>\n            </div> : null}\n        </div>\n    )\n}\n","export default __webpack_public_path__ + \"static/media/drill.1a13da94.png\";","export default __webpack_public_path__ + \"static/media/worker.5a8cd7ac.png\";","export default __webpack_public_path__ + \"static/media/monky.16a653ef.png\";","import drillImg from \"./images/drill.png\";\nimport workerImg from \"./images/worker.png\";\nimport monkeyImg from \"./images/monky.png\";\nclass Worker {\n  constructor({\n    defaultCost,\n    defaultProductionRate, \n    defaultProductionRateUpgradeCost, \n    name,\n    img,\n    miningSpeed\n  }) {\n        \n      // storage keys\n      this.OWNED_LOCAL_STORAGE_KEY = `Coalminer.${name}Owned`;\n      this.COST_LOCAL_STORAGE_KEY = `Coalminer.${name}Cost`;\n      this.UPGRADE_CAP_LOCAL_STORAGE_KEY = `Coalminer.${name}CapLimit`;\n      this.CURRENT_PRODUCTION_RATE_LOCAL_STORAGE_KEY = `Coalminer.${name}CurrentProductionRate`;\n      this.CURRENT_PRODUCTION_RATE_UPGRADE_COST_LOCAL_STORAGE_KEY = `Coalminer.${name}CurrentProductionRateUpgradeCost`;\n      \n      this.name = name;\n      this.owned = JSON.parse(localStorage.getItem(this.OWNED_LOCAL_STORAGE_KEY)) || 0;\n      this.cost =  JSON.parse(localStorage.getItem(this.COST_LOCAL_STORAGE_KEY)) || defaultCost;\n      this.productionRate = JSON.parse(localStorage.getItem(this.CURRENT_PPRODUCTION_RATE_LOCAL_STORAGE_KEY)) || defaultProductionRate;\n      this.productionRateUpgradeCost = JSON.parse(localStorage.getItem(this.CURRENT_PRODUCTION_RATE_UPGRADE_COST_LOCAL_STORAGE_KEY)) || defaultProductionRateUpgradeCost;\n      this.level = 0;\n      this.img = img;\n      this.speed = miningSpeed;\n      this.saveFiles = [\n        {\n          key: this.OWNED_LOCAL_STORAGE_KEY,\n          value: this.owned\n        },\n        {\n          key: this.COST_LOCAL_STORAGE_KEY,\n          value: this.cost\n        },\n        {\n          key: this.CURRENT_PRODUCTION_RATE_LOCAL_STORAGE_KEY,\n          value: this.productionRate\n        },\n        {\n          key: this.CURRENT_PRODUCTION_RATE_UPGRADE_COST_LOCAL_STORAGE_KEY,\n          value: this.productionRateUpgradeCost\n        }\n      ]\n    }\n    \n    save() {\n      this.saveFiles.forEach(save => {\n        localStorage.setItem(save.key, JSON.stringify(save.value))\n      })\n    }\n}\n\nconst miners = new Worker({\n  defaultCost: 10,\n  defaultProductionRate: 1, \n  defaultProductionRateUpgradeCost: 30, \n  name: \"Miners\",\n  img: workerImg,\n  miningSpeed: 3000,\n});\nconst drills = new Worker({\n  defaultCost: 50,\n  defaultProductionRate: 10, \n  defaultProductionRateUpgradeCost: 100, \n  name: \"Drills\",\n  img: drillImg,\n  miningSpeed: 2000,\n});\nconst monkeyMiners = new Worker({\n  defaultCost: 100,\n  defaultProductionRate: 20, \n  defaultProductionRateUpgradeCost: 300, \n  name: \"Monkey Miners\",\n  img: monkeyImg,\n  miningSpeed: 1000,\n})\nconst Workers = [miners, drills, monkeyMiners]\nexport default Workers;\n","import React from 'react';\nimport Worker from \"./Worker\";\nimport Workers from \"../misc\";\n\nexport default function WorkerList({ money, setMoney, multiplier}) {\n    return (\n        <ul class=\"worker-list\">\n            {Workers.map((worker, index) => \n                <Worker \n                    worker={worker} \n                    money={money} \n                    setMoney={setMoney} \n                    multiplier={multiplier} \n                    key={index} \n                />\n            )}\n        </ul>\n    )\n}\n","import React from 'react'\n\nexport default function Multiplier({amount, setMultiplier}) {\n    return (\n        <label for={`${amount}-multiplier`}>\n            {amount}x\n            <input\n                data-cy=\"multiplier\"\n                type=\"radio\"\n                value={amount}\n                id={`${amount}-multiplier`}\n                name=\"multiplier\"\n                onClick={() => {setMultiplier(amount)}}\n            ></input>\n        </label>\n    )\n}\n","import React from 'react'\nimport Multiplier from \"./Multiplier\";\n\nexport default function MultiplierList({setMultiplier}) {\n    return (\n        <div className=\"multiplier-container\">\n            <fieldset>\n                <legend>Multipliers for buying in mass:</legend>\n                <Multiplier amount={1} setMultiplier={setMultiplier} key=\"1\" />\n                <Multiplier amount={10} setMultiplier={setMultiplier} key=\"10\" />\n                <Multiplier amount={100} setMultiplier={setMultiplier} key=\"100\" />\n            </fieldset>\n        </div>\n    )\n}\n","import React, { useEffect, useState } from \"react\";\nimport WorkerList from \"./components/WorkerList\";\n\nimport \"./css/App.css\";\nimport MultiplierList from \"./components/MultiplierList\";\n\nfunction App() {\n  const [money, setMoney] = useState(10\n    // JSON.parse(localStorage.getItem(\"CoalMiner.money\")) || 10\n  );\n  const [multiplier, setMultiplier] = useState(1);\n  useEffect(() => {\n    localStorage.setItem(\"GoldMiner.money\", JSON.stringify(money))\n  }, [money])\n  return (\n    <>\n    <header>\n      <div className=\"text-container\">\n        <h1>Gold Miners</h1>\n        <h2>Current Money: <span data-cy=\"money\">{money}</span></h2>\n      </div>\n      <MultiplierList setMultiplier={setMultiplier} />\n    </header>\n    <main>\n      <WorkerList \n        money={money} \n        multiplier={multiplier} \n        setMoney={setMoney} \n      />\n    </main>\n    </>\n  );\n}\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.querySelector(\"body\")\n);\n"],"sourceRoot":""}